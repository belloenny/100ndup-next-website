{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/work/100ndup/website/components/lazyImage.tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nconst placeHolder = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkqAcAAIUAgUW0RjgAAAAASUVORK5CYII=\";\nexport const LazyImage = ({\n  src,\n  alt\n}) => {\n  const {\n    0: imageSrc,\n    1: setImageSrc\n  } = useState(placeHolder);\n  const {\n    0: imageRef,\n    1: setImageRef\n  } = useState();\n\n  const onLoad = event => {\n    event.target.classList.add(\"loaded\");\n  };\n\n  const onError = event => {\n    event.target.classList.add(\"has-error\");\n  };\n\n  useEffect(() => {\n    let observer;\n    let didCancel = false;\n\n    if (imageRef && imageSrc !== src) {\n      if (IntersectionObserver) {\n        observer = new IntersectionObserver(entries => {\n          entries.forEach(entry => {\n            if (!didCancel && (entry.intersectionRatio > 0 || entry.isIntersecting)) {\n              setImageSrc(src);\n              observer.unobserve(imageRef);\n            }\n          });\n        }, {\n          threshold: 0.01,\n          rootMargin: \"75%\"\n        });\n        observer.observe(imageRef);\n      } else {\n        // Old browsers fallback\n        setImageSrc(src);\n      }\n    }\n\n    return () => {\n      didCancel = true; // on component cleanup, we remove the listner\n\n      if (observer && observer.unobserve) {\n        observer.unobserve(imageRef);\n      }\n    };\n  }, [src, imageSrc, imageRef]);\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    //@ts-ignore\n    ref: setImageRef,\n    src: imageSrc,\n    alt: alt,\n    onLoad: onLoad,\n    onError: onError,\n    className: \"jsx-3110721095\" + \" \" + \"img\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), __jsx(_JSXStyle, {\n    id: \"3110721095\",\n    __self: this\n  }, `.img.jsx-3110721095{display:block;width:100%;}@-webkit-keyframes loaded-jsx-3110721095{0%{opacity:0.1;}100%{opacity:1;}}@keyframes loaded-jsx-3110721095{0%{opacity:0.1;}100%{opacity:1;}}.loaded.jsx-3110721095:not(.has-error){-webkit-animation:loaded-jsx-3110721095 300ms ease-in-out;animation:loaded-jsx-3110721095 300ms ease-in-out;}.has-error.jsx-3110721095{content:url(${placeHolder});}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWMvRG9jdW1lbnRzL3dvcmsvMTAwbmR1cC93ZWJzaXRlL2NvbXBvbmVudHMvbGF6eUltYWdlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrRXdCLEFBR21DLEFBS0UsQUFHRixBQUtxQixBQUlPLFVBUjFDLEVBSEEsRUFMVyxXQUNmLGlCQWdCQSxrRUFKQSIsImZpbGUiOiIvVXNlcnMvbWFjL0RvY3VtZW50cy93b3JrLzEwMG5kdXAvd2Vic2l0ZS9jb21wb25lbnRzL2xhenlJbWFnZS50c3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiXG5cbmNvbnN0IHBsYWNlSG9sZGVyID1cbiAgICBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBUUFBQUMxSEF3Q0FBQUFDMGxFUVZSNDJtTmtxQWNBQUlVQWdVVzBSamdBQUFBQVNVVk9SSzVDWUlJPVwiXG5cbmV4cG9ydCBjb25zdCBMYXp5SW1hZ2UgPSAoeyBzcmMsIGFsdCB9KSA9PiB7XG4gICAgY29uc3QgW2ltYWdlU3JjLCBzZXRJbWFnZVNyY10gPSB1c2VTdGF0ZShwbGFjZUhvbGRlcilcbiAgICBjb25zdCBbaW1hZ2VSZWYsIHNldEltYWdlUmVmXSA9IHVzZVN0YXRlKClcblxuICAgIGNvbnN0IG9uTG9hZCA9IGV2ZW50ID0+IHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJsb2FkZWRcIilcbiAgICB9XG5cbiAgICBjb25zdCBvbkVycm9yID0gZXZlbnQgPT4ge1xuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmFkZChcImhhcy1lcnJvclwiKVxuICAgIH1cblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGxldCBvYnNlcnZlclxuICAgICAgICBsZXQgZGlkQ2FuY2VsID0gZmFsc2VcblxuICAgICAgICBpZiAoaW1hZ2VSZWYgJiYgaW1hZ2VTcmMgIT09IHNyYykge1xuICAgICAgICAgICAgaWYgKEludGVyc2VjdGlvbk9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAgICAgICAgICAgICAgIGVudHJpZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFkaWRDYW5jZWwgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVudHJ5LmludGVyc2VjdGlvblJhdGlvID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkuaXNJbnRlcnNlY3RpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEltYWdlU3JjKHNyYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGltYWdlUmVmKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMC4wMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RNYXJnaW46IFwiNzUlXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGltYWdlUmVmKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBPbGQgYnJvd3NlcnMgZmFsbGJhY2tcbiAgICAgICAgICAgICAgICBzZXRJbWFnZVNyYyhzcmMpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGRpZENhbmNlbCA9IHRydWVcbiAgICAgICAgICAgIC8vIG9uIGNvbXBvbmVudCBjbGVhbnVwLCB3ZSByZW1vdmUgdGhlIGxpc3RuZXJcbiAgICAgICAgICAgIGlmIChvYnNlcnZlciAmJiBvYnNlcnZlci51bm9ic2VydmUpIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoaW1hZ2VSZWYpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCBbc3JjLCBpbWFnZVNyYywgaW1hZ2VSZWZdKVxuICAgIHJldHVybiAoXG4gICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgcmVmPXtzZXRJbWFnZVJlZn1cbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlU3JjfVxuICAgICAgICAgICAgICAgIGFsdD17YWx0fVxuICAgICAgICAgICAgICAgIG9uTG9hZD17b25Mb2FkfVxuICAgICAgICAgICAgICAgIG9uRXJyb3I9e29uRXJyb3J9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW1nXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgICAgICAgLmltZyB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgQGtleWZyYW1lcyBsb2FkZWQge1xuICAgICAgICAgICAgICAgICAgICAwJSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgMTAwJSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLmxvYWRlZDpub3QoLmhhcy1lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IGxvYWRlZCAzMDBtcyBlYXNlLWluLW91dDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAuaGFzLWVycm9yIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogdXJsKCR7cGxhY2VIb2xkZXJ9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgfTwvc3R5bGU+XG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgKVxufVxuIl19 */\n/*@ sourceURL=/Users/mac/Documents/work/100ndup/website/components/lazyImage.tsx */`));\n};","map":{"version":3,"sources":["/Users/mac/Documents/work/100ndup/website/components/lazyImage.tsx"],"names":["React","useState","useEffect","placeHolder","LazyImage","src","alt","imageSrc","setImageSrc","imageRef","setImageRef","onLoad","event","target","classList","add","onError","observer","didCancel","IntersectionObserver","entries","forEach","entry","intersectionRatio","isIntersecting","unobserve","threshold","rootMargin","observe"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AAEA,MAAMC,WAAW,GACb,oHADJ;AAGA,OAAO,MAAMC,SAAS,GAAG,CAAC;AAAEC,EAAAA,GAAF;AAAOC,EAAAA;AAAP,CAAD,KAAkB;AACvC,QAAM;AAAA,OAACC,QAAD;AAAA,OAAWC;AAAX,MAA0BP,QAAQ,CAACE,WAAD,CAAxC;AACA,QAAM;AAAA,OAACM,QAAD;AAAA,OAAWC;AAAX,MAA0BT,QAAQ,EAAxC;;AAEA,QAAMU,MAAM,GAAGC,KAAK,IAAI;AACpBA,IAAAA,KAAK,CAACC,MAAN,CAAaC,SAAb,CAAuBC,GAAvB,CAA2B,QAA3B;AACH,GAFD;;AAIA,QAAMC,OAAO,GAAGJ,KAAK,IAAI;AACrBA,IAAAA,KAAK,CAACC,MAAN,CAAaC,SAAb,CAAuBC,GAAvB,CAA2B,WAA3B;AACH,GAFD;;AAIAb,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIe,QAAJ;AACA,QAAIC,SAAS,GAAG,KAAhB;;AAEA,QAAIT,QAAQ,IAAIF,QAAQ,KAAKF,GAA7B,EAAkC;AAC9B,UAAIc,oBAAJ,EAA0B;AACtBF,QAAAA,QAAQ,GAAG,IAAIE,oBAAJ,CACPC,OAAO,IAAI;AACPA,UAAAA,OAAO,CAACC,OAAR,CAAgBC,KAAK,IAAI;AACrB,gBACI,CAACJ,SAAD,KACCI,KAAK,CAACC,iBAAN,GAA0B,CAA1B,IACGD,KAAK,CAACE,cAFV,CADJ,EAIE;AACEhB,cAAAA,WAAW,CAACH,GAAD,CAAX;AACAY,cAAAA,QAAQ,CAACQ,SAAT,CAAmBhB,QAAnB;AACH;AACJ,WATD;AAUH,SAZM,EAaP;AACIiB,UAAAA,SAAS,EAAE,IADf;AAEIC,UAAAA,UAAU,EAAE;AAFhB,SAbO,CAAX;AAkBAV,QAAAA,QAAQ,CAACW,OAAT,CAAiBnB,QAAjB;AACH,OApBD,MAoBO;AACH;AACAD,QAAAA,WAAW,CAACH,GAAD,CAAX;AACH;AACJ;;AACD,WAAO,MAAM;AACTa,MAAAA,SAAS,GAAG,IAAZ,CADS,CAET;;AACA,UAAID,QAAQ,IAAIA,QAAQ,CAACQ,SAAzB,EAAoC;AAChCR,QAAAA,QAAQ,CAACQ,SAAT,CAAmBhB,QAAnB;AACH;AACJ,KAND;AAOH,GArCQ,EAqCN,CAACJ,GAAD,EAAME,QAAN,EAAgBE,QAAhB,CArCM,CAAT;AAsCA,SACI,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AACE;AACE,IAAA,GAAG,EAAEC,WAFT;AAGI,IAAA,GAAG,EAAEH,QAHT;AAII,IAAA,GAAG,EAAED,GAJT;AAKI,IAAA,MAAM,EAAEK,MALZ;AAMI,IAAA,OAAO,EAAEK,OANb;AAAA,wCAOc,KAPd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAAA;AAAA;AAAA,4XA6B2Bb,WA7B3B;;oFAAA,EADJ;AAmCH,CArFM","sourcesContent":["import React, { useState, useEffect } from \"react\"\n\nconst placeHolder =\n    \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkqAcAAIUAgUW0RjgAAAAASUVORK5CYII=\"\n\nexport const LazyImage = ({ src, alt }) => {\n    const [imageSrc, setImageSrc] = useState(placeHolder)\n    const [imageRef, setImageRef] = useState()\n\n    const onLoad = event => {\n        event.target.classList.add(\"loaded\")\n    }\n\n    const onError = event => {\n        event.target.classList.add(\"has-error\")\n    }\n\n    useEffect(() => {\n        let observer\n        let didCancel = false\n\n        if (imageRef && imageSrc !== src) {\n            if (IntersectionObserver) {\n                observer = new IntersectionObserver(\n                    entries => {\n                        entries.forEach(entry => {\n                            if (\n                                !didCancel &&\n                                (entry.intersectionRatio > 0 ||\n                                    entry.isIntersecting)\n                            ) {\n                                setImageSrc(src)\n                                observer.unobserve(imageRef)\n                            }\n                        })\n                    },\n                    {\n                        threshold: 0.01,\n                        rootMargin: \"75%\"\n                    }\n                )\n                observer.observe(imageRef)\n            } else {\n                // Old browsers fallback\n                setImageSrc(src)\n            }\n        }\n        return () => {\n            didCancel = true\n            // on component cleanup, we remove the listner\n            if (observer && observer.unobserve) {\n                observer.unobserve(imageRef)\n            }\n        }\n    }, [src, imageSrc, imageRef])\n    return (\n        <React.Fragment>\n            <img\n              //@ts-ignore\n                ref={setImageRef}\n                src={imageSrc}\n                alt={alt}\n                onLoad={onLoad}\n                onError={onError}\n                className=\"img\"\n            />\n            <style jsx>{`\n                .img {\n                    display: block;\n                    width: 100%;\n                }\n                @keyframes loaded {\n                    0% {\n                        opacity: 0.1;\n                    }\n                    100% {\n                        opacity: 1;\n                    }\n                }\n\n                .loaded:not(.has-error) {\n                    animation: loaded 300ms ease-in-out;\n                }\n\n                .has-error {\n                    content: url(${placeHolder});\n                }\n            `}</style>\n        </React.Fragment>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}