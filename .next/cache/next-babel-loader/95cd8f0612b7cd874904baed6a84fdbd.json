{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/work/100ndup/website/components/lazyImage.tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nconst placeHolder = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkqAcAAIUAgUW0RjgAAAAASUVORK5CYII=\";\nexport const LazyImage = ({\n  src,\n  alt,\n  height\n}) => {\n  const {\n    0: imageSrc,\n    1: setImageSrc\n  } = useState(placeHolder);\n  const {\n    0: imageRef,\n    1: setImageRef\n  } = useState();\n\n  const onLoad = event => {\n    event.target.classList.add(\"loaded\");\n  };\n\n  const onError = event => {\n    event.target.classList.add(\"has-error\");\n  };\n\n  useEffect(() => {\n    let observer;\n    let didCancel = false;\n\n    if (imageRef && imageSrc !== src) {\n      if (IntersectionObserver) {\n        observer = new IntersectionObserver(entries => {\n          entries.forEach(entry => {\n            if (!didCancel && (entry.intersectionRatio > 0 || entry.isIntersecting)) {\n              setImageSrc(src);\n              observer.unobserve(imageRef);\n            }\n          });\n        }, {\n          threshold: 0.01,\n          rootMargin: \"75%\"\n        });\n        observer.observe(imageRef);\n      } else {\n        // Old browsers fallback\n        setImageSrc(src);\n      }\n    }\n\n    return () => {\n      didCancel = true; // on component cleanup, we remove the listner\n\n      if (observer && observer.unobserve) {\n        observer.unobserve(imageRef);\n      }\n    };\n  }, [src, imageSrc, imageRef]);\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    //@ts-ignore\n    ref: setImageRef,\n    src: imageSrc,\n    alt: alt,\n    onLoad: onLoad,\n    onError: onError,\n    height: height,\n    className: _JSXStyle.dynamic([[\"1865738905\", [height, placeHolder]]]) + \" \" + \"img\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), __jsx(_JSXStyle, {\n    id: \"1865738905\",\n    dynamic: [height, placeHolder],\n    __self: this\n  }, `.img.__jsx-style-dynamic-selector{display:block;height:${height};width:100%;}@-webkit-keyframes loaded-__jsx-style-dynamic-selector{0%{opacity:0.1;}100%{opacity:1;}}@keyframes loaded-__jsx-style-dynamic-selector{0%{opacity:0.1;}100%{opacity:1;}}.loaded.__jsx-style-dynamic-selector:not(.has-error){-webkit-animation:loaded-__jsx-style-dynamic-selector 300ms ease-in-out;animation:loaded-__jsx-style-dynamic-selector 300ms ease-in-out;}.has-error.__jsx-style-dynamic-selector{content:url(${placeHolder});}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWMvRG9jdW1lbnRzL3dvcmsvMTAwbmR1cC93ZWJzaXRlL2NvbXBvbmVudHMvbGF6eUltYWdlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtRXdCLEFBR21DLEFBTUUsQUFHRixBQUtxQixBQUlPLFVBUjFDLEVBSEEsRUFOb0MsNEJBa0J4QyxRQWpCZSxXQUNmLDJFQVlBIiwiZmlsZSI6Ii9Vc2Vycy9tYWMvRG9jdW1lbnRzL3dvcmsvMTAwbmR1cC93ZWJzaXRlL2NvbXBvbmVudHMvbGF6eUltYWdlLnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCJcblxuY29uc3QgcGxhY2VIb2xkZXIgPVxuICAgIFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FRQUFBQzFIQXdDQUFBQUMwbEVRVlI0Mm1Oa3FBY0FBSVVBZ1VXMFJqZ0FBQUFBU1VWT1JLNUNZSUk9XCJcblxuZXhwb3J0IGNvbnN0IExhenlJbWFnZSA9ICh7IHNyYywgYWx0LCBoZWlnaHQgfSkgPT4ge1xuICAgIGNvbnN0IFtpbWFnZVNyYywgc2V0SW1hZ2VTcmNdID0gdXNlU3RhdGUocGxhY2VIb2xkZXIpXG4gICAgY29uc3QgW2ltYWdlUmVmLCBzZXRJbWFnZVJlZl0gPSB1c2VTdGF0ZSgpXG5cbiAgICBjb25zdCBvbkxvYWQgPSBldmVudCA9PiB7XG4gICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKFwibG9hZGVkXCIpXG4gICAgfVxuXG4gICAgY29uc3Qgb25FcnJvciA9IGV2ZW50ID0+IHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoYXMtZXJyb3JcIilcbiAgICB9XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBsZXQgb2JzZXJ2ZXJcbiAgICAgICAgbGV0IGRpZENhbmNlbCA9IGZhbHNlXG5cbiAgICAgICAgaWYgKGltYWdlUmVmICYmIGltYWdlU3JjICE9PSBzcmMpIHtcbiAgICAgICAgICAgIGlmIChJbnRlcnNlY3Rpb25PYnNlcnZlcikge1xuICAgICAgICAgICAgICAgIG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgICAgICAgICAgICAgICBlbnRyaWVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZGlkQ2FuY2VsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LmlzSW50ZXJzZWN0aW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJbWFnZVNyYyhzcmMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShpbWFnZVJlZilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDAuMDEsXG4gICAgICAgICAgICAgICAgICAgICAgICByb290TWFyZ2luOiBcIjc1JVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShpbWFnZVJlZilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gT2xkIGJyb3dzZXJzIGZhbGxiYWNrXG4gICAgICAgICAgICAgICAgc2V0SW1hZ2VTcmMoc3JjKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBkaWRDYW5jZWwgPSB0cnVlXG4gICAgICAgICAgICAvLyBvbiBjb21wb25lbnQgY2xlYW51cCwgd2UgcmVtb3ZlIHRoZSBsaXN0bmVyXG4gICAgICAgICAgICBpZiAob2JzZXJ2ZXIgJiYgb2JzZXJ2ZXIudW5vYnNlcnZlKSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGltYWdlUmVmKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwgW3NyYywgaW1hZ2VTcmMsIGltYWdlUmVmXSlcbiAgICByZXR1cm4gKFxuICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIHJlZj17c2V0SW1hZ2VSZWZ9XG4gICAgICAgICAgICAgICAgc3JjPXtpbWFnZVNyY31cbiAgICAgICAgICAgICAgICBhbHQ9e2FsdH1cbiAgICAgICAgICAgICAgICBvbkxvYWQ9e29uTG9hZH1cbiAgICAgICAgICAgICAgICBvbkVycm9yPXtvbkVycm9yfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImltZ1wiXG4gICAgICAgICAgICAgICAgaGVpZ2h0PXtoZWlnaHR9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAgICAgICAgIC5pbWcge1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAke2hlaWdodH07XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBAa2V5ZnJhbWVzIGxvYWRlZCB7XG4gICAgICAgICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAxMDAlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAubG9hZGVkOm5vdCguaGFzLWVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogbG9hZGVkIDMwMG1zIGVhc2UtaW4tb3V0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5oYXMtZXJyb3Ige1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB1cmwoJHtwbGFjZUhvbGRlcn0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGB9PC9zdHlsZT5cbiAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICApXG59XG4iXX0= */\n/*@ sourceURL=/Users/mac/Documents/work/100ndup/website/components/lazyImage.tsx */`));\n};","map":{"version":3,"sources":["/Users/mac/Documents/work/100ndup/website/components/lazyImage.tsx"],"names":["React","useState","useEffect","placeHolder","LazyImage","src","alt","height","imageSrc","setImageSrc","imageRef","setImageRef","onLoad","event","target","classList","add","onError","observer","didCancel","IntersectionObserver","entries","forEach","entry","intersectionRatio","isIntersecting","unobserve","threshold","rootMargin","observe"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AAEA,MAAMC,WAAW,GACb,oHADJ;AAGA,OAAO,MAAMC,SAAS,GAAG,CAAC;AAAEC,EAAAA,GAAF;AAAOC,EAAAA,GAAP;AAAYC,EAAAA;AAAZ,CAAD,KAA0B;AAC/C,QAAM;AAAA,OAACC,QAAD;AAAA,OAAWC;AAAX,MAA0BR,QAAQ,CAACE,WAAD,CAAxC;AACA,QAAM;AAAA,OAACO,QAAD;AAAA,OAAWC;AAAX,MAA0BV,QAAQ,EAAxC;;AAEA,QAAMW,MAAM,GAAGC,KAAK,IAAI;AACpBA,IAAAA,KAAK,CAACC,MAAN,CAAaC,SAAb,CAAuBC,GAAvB,CAA2B,QAA3B;AACH,GAFD;;AAIA,QAAMC,OAAO,GAAGJ,KAAK,IAAI;AACrBA,IAAAA,KAAK,CAACC,MAAN,CAAaC,SAAb,CAAuBC,GAAvB,CAA2B,WAA3B;AACH,GAFD;;AAIAd,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIgB,QAAJ;AACA,QAAIC,SAAS,GAAG,KAAhB;;AAEA,QAAIT,QAAQ,IAAIF,QAAQ,KAAKH,GAA7B,EAAkC;AAC9B,UAAIe,oBAAJ,EAA0B;AACtBF,QAAAA,QAAQ,GAAG,IAAIE,oBAAJ,CACPC,OAAO,IAAI;AACPA,UAAAA,OAAO,CAACC,OAAR,CAAgBC,KAAK,IAAI;AACrB,gBACI,CAACJ,SAAD,KACCI,KAAK,CAACC,iBAAN,GAA0B,CAA1B,IACGD,KAAK,CAACE,cAFV,CADJ,EAIE;AACEhB,cAAAA,WAAW,CAACJ,GAAD,CAAX;AACAa,cAAAA,QAAQ,CAACQ,SAAT,CAAmBhB,QAAnB;AACH;AACJ,WATD;AAUH,SAZM,EAaP;AACIiB,UAAAA,SAAS,EAAE,IADf;AAEIC,UAAAA,UAAU,EAAE;AAFhB,SAbO,CAAX;AAkBAV,QAAAA,QAAQ,CAACW,OAAT,CAAiBnB,QAAjB;AACH,OApBD,MAoBO;AACH;AACAD,QAAAA,WAAW,CAACJ,GAAD,CAAX;AACH;AACJ;;AACD,WAAO,MAAM;AACTc,MAAAA,SAAS,GAAG,IAAZ,CADS,CAET;;AACA,UAAID,QAAQ,IAAIA,QAAQ,CAACQ,SAAzB,EAAoC;AAChCR,QAAAA,QAAQ,CAACQ,SAAT,CAAmBhB,QAAnB;AACH;AACJ,KAND;AAOH,GArCQ,EAqCN,CAACL,GAAD,EAAMG,QAAN,EAAgBE,QAAhB,CArCM,CAAT;AAsCA,SACI,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AACE;AACE,IAAA,GAAG,EAAEC,WAFT;AAGI,IAAA,GAAG,EAAEH,QAHT;AAII,IAAA,GAAG,EAAEF,GAJT;AAKI,IAAA,MAAM,EAAEM,MALZ;AAMI,IAAA,OAAO,EAAEK,OANb;AAQI,IAAA,MAAM,EAAEV,MARZ;AAAA,kDAakBA,MAblB,EA8BuBJ,WA9BvB,aAOc,KAPd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAAA;AAAA,cAcsBI,MAdtB,EA+B2BJ,WA/B3B;AAAA;AAAA,+DAcsBI,MAdtB,0aA+B2BJ,WA/B3B;;oFAAA,EADJ;AAqCH,CAvFM","sourcesContent":["import React, { useState, useEffect } from \"react\"\n\nconst placeHolder =\n    \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkqAcAAIUAgUW0RjgAAAAASUVORK5CYII=\"\n\nexport const LazyImage = ({ src, alt, height }) => {\n    const [imageSrc, setImageSrc] = useState(placeHolder)\n    const [imageRef, setImageRef] = useState()\n\n    const onLoad = event => {\n        event.target.classList.add(\"loaded\")\n    }\n\n    const onError = event => {\n        event.target.classList.add(\"has-error\")\n    }\n\n    useEffect(() => {\n        let observer\n        let didCancel = false\n\n        if (imageRef && imageSrc !== src) {\n            if (IntersectionObserver) {\n                observer = new IntersectionObserver(\n                    entries => {\n                        entries.forEach(entry => {\n                            if (\n                                !didCancel &&\n                                (entry.intersectionRatio > 0 ||\n                                    entry.isIntersecting)\n                            ) {\n                                setImageSrc(src)\n                                observer.unobserve(imageRef)\n                            }\n                        })\n                    },\n                    {\n                        threshold: 0.01,\n                        rootMargin: \"75%\"\n                    }\n                )\n                observer.observe(imageRef)\n            } else {\n                // Old browsers fallback\n                setImageSrc(src)\n            }\n        }\n        return () => {\n            didCancel = true\n            // on component cleanup, we remove the listner\n            if (observer && observer.unobserve) {\n                observer.unobserve(imageRef)\n            }\n        }\n    }, [src, imageSrc, imageRef])\n    return (\n        <React.Fragment>\n            <img\n              //@ts-ignore\n                ref={setImageRef}\n                src={imageSrc}\n                alt={alt}\n                onLoad={onLoad}\n                onError={onError}\n                className=\"img\"\n                height={height}\n            />\n            <style jsx>{`\n                .img {\n                    display: block;\n                    height: ${height};\n                    width: 100%;\n                }\n                @keyframes loaded {\n                    0% {\n                        opacity: 0.1;\n                    }\n                    100% {\n                        opacity: 1;\n                    }\n                }\n\n                .loaded:not(.has-error) {\n                    animation: loaded 300ms ease-in-out;\n                }\n\n                .has-error {\n                    content: url(${placeHolder});\n                }\n            `}</style>\n        </React.Fragment>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}